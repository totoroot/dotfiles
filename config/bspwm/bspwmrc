#!/usr/bin/env bash

set -x

export MONITORS=( $(xrandr -q | grep ' connected' | cut -d' ' -f1) )

if [[ $(hostname) == 'purple' ]]; then
    xrandr --output ${MONITORS[0]} --below ${MONITORS[1]}
    # set workspaces
    bspc monitor ${MONITORS[0]} -d {1,2,5,6}
    bspc monitor ${MONITORS[1]} -d {3,4,7,8}
else
    xrandr --auto
    bspc monitor ${MONITORS[0]} -d {1,2,3,4}
fi

bspc config remove_disabled_monitors true
bspc config remove_unplugged_monitors true

# Rules
bspc rule -r '*'

#
for file in $XDG_CONFIG_HOME/bspwm/rc.d/*; do
  source "$file"
done
